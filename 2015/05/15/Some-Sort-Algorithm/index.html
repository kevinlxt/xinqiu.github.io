<!DOCTYPE html>
<html>
    <head>
    <!-- Title -->
    
    <title>
        几种常见排序算法的学习 | 一人Code
    </title>
    
    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">
    
    <!-- Meta & INfo -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Xin Qiu">
    <meta name="description" content="写给自己的Blog">
    <meta name="keywords" content="null">
    
    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">
    
    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="一人Code">
    
    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://xinqiu.me">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="几种常见排序算法的学习 | 一人Code">
    <meta property="og:description" content="写给自己的Blog">
    
     <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">
        
        
            <script src="/js/ie-blocker.en.js"></script>
        
    <![endif]-->
    
    <!-- Import CSS -->
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <!-- Config CSS -->


<!-- Other Styles -->
<style>
	body, html{
		font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
	}
	
    a{
        color: #00838F
    }
    
    .mdl-card__media,
    #search-label,
    #search-form-label:after,
    #scheme-Paradox .hot_tags-count,
    #scheme-Paradox .sidebar_archives-count,
    #scheme-Paradox .sidebar-colored .sidebar-header,
    #scheme-Paradox .sidebar-colored .sidebar-badge{
        background-color: #0097A7 !important
    }
    
	/* Sidebar User Drop Down Menu Text Color */
	#scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
    #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus{
        color: #0097A7 !important
    }
    
    #post_entry-right-info,
    .sidebar-colored .sidebar-nav li:hover > a,
    .sidebar-colored .sidebar-nav li:hover > a i,
    .sidebar-colored .sidebar-nav li > a:hover,
    .sidebar-colored .sidebar-nav li > a:hover i,
    .sidebar-colored .sidebar-nav li > a:focus i,
    .sidebar-colored .sidebar-nav > .open > a,
    .sidebar-colored .sidebar-nav > .open > a:hover,
    .sidebar-colored .sidebar-nav > .open > a:focus,
    #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a{
        color: #0097A7 !important
    }
    
    .toTop{
        background: #757575 !important
    }
		
	.material-layout .material-post>.material-nav,
	.material-layout .material-index>.material-nav,
	.material-nav a{
		color: #757575;
	}
		
	#scheme-Paradox .MD-burger-layer {
		background-color: #757575;
	}

	#scheme-Paradox #post-toc-trigger-btn{
		color: #757575;
	}
	
	.post-toc a:hover{
		color: #00838F;
		text-decoration: underline;
	}
</style>


<!-- Theme Background Related-->

    <style>
        body{
            background-color: #F5F5F5
        }
		
		/* blog_info bottom background */
        #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
            background-color: #fff;
        }
    </style>




<!-- Fade Effect -->

    <style>
        .fade {
            transition: all 800ms linear;
            -webkit-transform: translate3d(0,0,0);
            -moz-transform: translate3d(0,0,0);
            -ms-transform: translate3d(0,0,0);
            -o-transform: translate3d(0,0,0);
            transform: translate3d(0,0,0);
            opacity: 1;
        }

        .fade.out{
            opacity: 0;
        }
    </style>

	<script src="/js/jquery.min.js"></script>
	
	<!-- UC Browser Compatible-->
	<script>
		var agent = navigator.userAgent.toLowerCase();
		if(agent.indexOf('ucbrowser')>0) {
			document.write('<link rel="stylesheet" href="/css/uc.css">');
		   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
		}
	</script>
    
    <!-- Custom Head -->
    
</head>
	
	

    <body id="scheme-Paradox">

		
        <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
				
			
			
            <!-- Main Container -->
            <main class="material-layout__content" id="main">
				
                <!-- Top Anchor -->
                <div id="top"></div>
				
				
                <!-- Hamburger Button -->
                <button class="MD-burger-icon sidebar-toggle">
                    <span class="MD-burger-layer"></span>
                </button>
				
				
                
	<!-- Back Button -->
<!--
	<div class="material-back" id="backhome-div" tabindex="0">
		<a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" href="#" onclick="window.history.back();return false;" target="_self" role="button" data-upgraded=",MaterialButton,MaterialRipple">
			<i class="material-icons" role="presentation">arrow_back</i>
			<span class="mdl-button__ripple-container">
				<span class="mdl-ripple"></span>
			</span>
		</a>
	</div>			
-->
	<!-- Left aligned menu below button -->
	<button id="post-toc-trigger-btn"
			class="mdl-button mdl-js-button mdl-button--icon">
	  <i class="material-icons">format_list_numbered</i>
	</button>

	<ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect"
		for="post-toc-trigger-btn">
			
			<ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1"><span class="post-toc-number">1.</span> <span class="post-toc-text">插入排序</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#u4ECB_u7ECD"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">介绍</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#u63D2_u5165_u6392_u5E8F_u7684_u5206_u6790"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">插入排序的分析</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#u603B_u7ED3"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">总结</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2"><span class="post-toc-number">2.</span> <span class="post-toc-text">希尔排序</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#u4ECB_u7ECD-1"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">介绍</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3"><span class="post-toc-number">3.</span> <span class="post-toc-text">堆排序</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#u7B97_u6CD5_u5206_u6790"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">算法分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#u5EFA_u5806"><span class="post-toc-number">3.1.1.</span> <span class="post-toc-text">建堆</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#DeleteMax"><span class="post-toc-number">3.1.2.</span> <span class="post-toc-text">DeleteMax</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#u603B_u7ED3-1"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">总结</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4"><span class="post-toc-number">4.</span> <span class="post-toc-text">归并排序</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#u4ECB_u7ECD-2"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">介绍</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#u7B97_u6CD5_u5206_u6790-1"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">算法分析</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#u603B_u7ED3-2"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">总结</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5"><span class="post-toc-number">5.</span> <span class="post-toc-text">快速排序</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#u4ECB_u7ECD-3"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">介绍</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#u7B97_u6CD5_u5206_u6790-2"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">算法分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#u9009_u53D6_u67A2_u7EBD_u5143"><span class="post-toc-number">5.2.1.</span> <span class="post-toc-text">选取枢纽元</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#u5C0F_u6570_u7EC4"><span class="post-toc-number">5.2.2.</span> <span class="post-toc-text">小数组</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#u7B97_u6CD5_u6838_u5FC3"><span class="post-toc-number">5.2.3.</span> <span class="post-toc-text">算法核心</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#u603B_u7ED3-3"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">总结</span></a></li></ol></li></ol>
		
<!--			<li class="mdl-menu__item">Some Action</li>-->
	</ul>


<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">
		
        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
	<!-- Paradox Post Header -->
	
		
			<!-- Random Thumbnail -->
			<div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
				<script>
    
    var randomNum;
    randomNum = Math.floor(Math.random() * 5 + 1);
    
    $(".post_thumbnail-random").css('background-image', 'url(' + '/img/random/' + randomNum + '.png' + ')');
    
</script>

		
	
        <p class="article-headline-p">
            几种常见排序算法的学习
        </p>
    </div>

	

				
				
					<!-- Paradox Post Info -->
					<div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">
    
    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Xin Qiu</strong>
        <span>May 15, 2015</span>
    </div>
    
    <div class="section-spacer"></div>
	
    <!-- Favorite -->
<!--
    <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
        <i class="material-icons" role="presentation">favorite</i>
        <span class="visuallyhidden">favorites</span>
    </button>
-->
    
    <!-- Tags (bookmark) -->
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/algorithm/">algorithm</a>
    </ul>
    
    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    
    
    <!-- Leancloud Views -->
    <a class="post_share-link" href="#">
        <li class="mdl-menu__item">
            <span id="/2015/05/15/Some-Sort-Algorithm/" class="leancloud-views_num" data-flag-title="几种常见排序算法的学习">
     &nbsp;Views
</span>
        </li>
    </a>
    
    
    
    
    <!-- Share Twitter -->
    <a class="post_share-link" href="https://twitter.com/intent/tweet?text=几种常见排序算法的学习&url=http://xinqiu.me//2015/05/15/Some-Sort-Algorithm/index.html&via=Xin Qiu" target="_blank">
        <li class="mdl-menu__item">
            Share to Twitter
        </li>
    </a>
    
    <!-- Share Google+ -->
    <a class="post_share-link" href="https://plus.google.com/share?url=http://xinqiu.me//2015/05/15/Some-Sort-Algorithm/index.html" target="_blank">
        <li class="mdl-menu__item">
            Share to Google+
        </li>
    </a>
    
    <!-- Share Weibo -->
    <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=几种常见排序算法的学习&url=http://xinqiu.me//2015/05/15/Some-Sort-Algorithm/index.html&pic=&searchPic=false&style=simple" target="_blank">
        <li class="mdl-menu__item">
            Share to Weibo
        </li>
    </a>
</ul>
</div>
				

                <!-- Post Content -->
                <div id="post-content" class="markdown-Github mdl-color-text--grey-700 mdl-card__supporting-text fade out">
	
		<blockquote>
<p>排序算法是面试中常被提及的算法种类之一，以下记录了我学排序的一些想法。</p>
</blockquote>
<!-- toc -->
<ul>
<li><a href="#1">插入排序</a></li>
<li><a href="#2">希尔排序</a></li>
<li><a href="#3">堆排序</a></li>
<li><a href="#4">归并排序</a></li>
<li><a href="#5">快速排序</a></li>
</ul>
<a id="more"></a>
<h2 id="1">插入排序</h2>

<h3 id="u4ECB_u7ECD"><a href="#u4ECB_u7ECD" class="headerlink" title="介绍"></a>介绍</h3><p>插入排序(insertion sort)是最简单的排序算法之一。插入排序由 <code>N - 1</code> 趟(pass)排序组成。对于<code>P = 1</code> 趟到 <code>P = N - 1</code> 趟，插入算法保证从位置 0 到位置 P 上的元素为已排序状态。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertionSort</span><span class="params">(ElementType A[],<span class="keyword">int</span> N)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> j, P;</div><div class="line">    </div><div class="line">    ElementType Tmp;</div><div class="line">    <span class="keyword">for</span>(P = <span class="number">1</span>; P &lt; N; P++)</div><div class="line">    &#123;</div><div class="line">        Tmp = A[P];</div><div class="line">        <span class="keyword">for</span>(j = P; j &gt; <span class="number">0</span> &amp;&amp; A[j<span class="number">-1</span>] &gt; Tmp; j--)</div><div class="line">            A[j] = A[j<span class="number">-1</span>];</div><div class="line">        A[j] = Tmp;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="u63D2_u5165_u6392_u5E8F_u7684_u5206_u6790"><a href="#u63D2_u5165_u6392_u5E8F_u7684_u5206_u6790" class="headerlink" title="插入排序的分析"></a>插入排序的分析</h3><p>嵌套循环的每一个都花费 <code>N</code> 次迭代,<br>对所有的P进行求和，得到总数为<br><img src="http://latex.codecogs.com/gif.latex?%5Csum_%7Bi%3D2%7D%5E%7BN%7Di%3D2&plus;3&plus;4&plus;...&plus;N= \Theta(N^{2}\" alt="">)</p>
<p>因此插入排序为<img src="http://chart.googleapis.com/chart?cht=tx&amp;chl=O(N^{2}\" alt="">)。</p>
<h3 id="u603B_u7ED3"><a href="#u603B_u7ED3" class="headerlink" title="总结"></a>总结</h3><p>其实就是从左到右，取每个元素，通过比较让其放在正确的位置。相比同样是<img src="http://www.forkosh.com/mathtex.cgi?%20O(N^{2}\" alt="">)的冒泡排序，插入排序减少了交换元素的次数。</p>
<h2 id="2">希尔排序</h2>

<h3 id="u4ECB_u7ECD-1"><a href="#u4ECB_u7ECD-1" class="headerlink" title="介绍"></a>介绍</h3><p>希尔排序(Shellsort)，有时也叫缩小增量排序(deminishing increment sort)，通过比较相距一定间隔的元素来工作；各趟比较所用的距离随着算法的进行而减小，直到只比较相距相邻元素的最后一趟排序为止。</p>
<p>增量的选择有多种，不同的增量，性能也不同。较为常见的是使用希尔增量。以下是以增量为<code>N / 2</code>的算法。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShellSort</span><span class="params">(ElementType A[], <span class="keyword">int</span> N)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> i,j,Increment;</div><div class="line">    ElementType Tmp;</div><div class="line">    </div><div class="line">    <span class="keyword">for</span> (Increment = N / <span class="number">2</span>; Increment &gt; <span class="number">0</span>; Increment /= <span class="number">2</span>) </div><div class="line">    &#123;</div><div class="line">        <span class="keyword">for</span> (i = Increment; i &lt; N; i++) </div><div class="line">        &#123;</div><div class="line">            Tmp = A[i];</div><div class="line">            <span class="keyword">for</span>(j = i; j &gt;= Increment; j-= Increment)</div><div class="line">                <span class="keyword">if</span> (Tmp &lt; A[j - Increment])</div><div class="line">                    A[j] = A[j - Increment];</div><div class="line">                <span class="keyword">else</span></div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">            A[j] = Tmp;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###总结</p>
<p>希尔排序的性能取决于增量的选择。希尔排序说白了就是先使相同间隔的元素有序，然后缩写间隔，从而完成整个排序。</p>
<h2 id="3">堆排序</h2>

<p>###介绍</p>
<p>堆排序(heapsort)，基于优先队列可以用花费<img src="http://chart.googleapis.com/chart?cht=tx&amp;chl=O({N}\log{N}\" alt="">)时间的排序的特性。然而实践中它却慢于使用Sedgewick增量序列的希尔排序。</p>
<p>建立堆花费的时间是<img src="http://chart.googleapis.com/chart?cht=tx&amp;chl=O(N\" alt="">)，然后执行<code>N</code>次<code>DeleteMin</code>操作。按照顺序，最小的元素先离开该堆。每次<code>DeleteMin</code>花费时间<img src="http://chart.googleapis.com/chart?cht=tx&amp;chl=O(\log{N}\" alt="">),因此总的运行时间是<img src="http://chart.googleapis.com/chart?cht=tx&amp;chl=O({N}\log{N}\" alt="">).</p>
<p>该算法的主要问题在于它使用了一个附加数组。因此，存储需求增加一倍。在每次<code>DeleteMin</code>之后，堆缩小1，将堆中最后一个单元用来存放刚刚删去的元素，即可避免使用第二个数组。</p>
<h3 id="u7B97_u6CD5_u5206_u6790"><a href="#u7B97_u6CD5_u5206_u6790" class="headerlink" title="算法分析"></a>算法分析</h3><p>堆排序的过程是先建堆，后操作。</p>
<h4 id="u5EFA_u5806"><a href="#u5EFA_u5806" class="headerlink" title="建堆"></a>建堆</h4><p>将数组视为一颗完全二叉树，从其最后一个非叶子节点<code>n / 2</code>开始调整。将该节点的儿子节点中，较大的节点与该节点互换。<br><img src="http://images.cnitblog.com/blog/305504/201301/23175544-9a438436abaa4043a5f00191fbc4626b.png" alt=""></p>
<h4 id="DeleteMax"><a href="#DeleteMax" class="headerlink" title="DeleteMax"></a>DeleteMax</h4><p>将堆中最后一个元素与第一个元素交换，缩减堆的大小并进行下滤，来执行<code>N - 1</code>次DeleteMax操作。</p>
<h3 id="u603B_u7ED3-1"><a href="#u603B_u7ED3-1" class="headerlink" title="总结"></a>总结</h3><p>堆排序的总结起来就两步，建堆的部分比较重要，需要慢慢理解才能弄懂。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">PercDown</span><span class="params">(ElementType A[],<span class="keyword">int</span> i,<span class="keyword">int</span> N)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> Child;</div><div class="line">    ElementType Tmp;</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(Tmp = A[i];LeftChild(i) &lt; N;i = Child)    </div><div class="line">    &#123;</div><div class="line">        Child = LeftChild(i);                            <span class="comment">// 以下修改可实现从大到小排序</span></div><div class="line">        <span class="keyword">if</span>(Child != N - <span class="number">1</span> &amp;&amp; A[Child + <span class="number">1</span>] &gt; A[Child])    <span class="comment">// A[Child + 1] &lt; A[Child]</span></div><div class="line">            Child++;</div><div class="line">        <span class="keyword">if</span>(Tmp &lt; A[Child])                               <span class="comment">// Tmp &gt; A[Child]</span></div><div class="line">            A[i] = A[Child];</div><div class="line">        <span class="keyword">else</span></div><div class="line">            <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">    A[i] = Tmp;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Heapsort</span><span class="params">(ElementType A[],<span class="keyword">int</span> N)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> i;</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(i = N / <span class="number">2</span>;i &gt;= <span class="number">0</span>;i--)   <span class="comment">// BuildHeap</span></div><div class="line">        PercDown(A,i,N);</div><div class="line">    <span class="keyword">for</span>(i = N - <span class="number">1</span>;i &gt; <span class="number">0</span>;i--)    <span class="comment">// DeletMax</span></div><div class="line">    &#123;</div><div class="line">        swap(&amp;A[<span class="number">0</span>],&amp;A[i]);</div><div class="line">        PercDown(A,<span class="number">0</span>,i);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="4">归并排序</h2>

<h3 id="u4ECB_u7ECD-2"><a href="#u4ECB_u7ECD-2" class="headerlink" title="介绍"></a>介绍</h3><p>归并排序以<img src="http://chart.googleapis.com/chart?cht=tx&amp;chl=O({N}\log{N}\" alt="">)最坏情形运行时间运行，而使用的比较次数几乎是最优的。它的基本操作是合并两个已排好序的表。基本的合并算法是取两个输入数组A和B，一个输出数组C，以及三个计数器<em>Aptr</em>,<em>Bptr</em>,<em>Cptr</em>,它们初始置于对应数组的开始端。A[<em>Aptr</em>]和B[<em>Bptr</em>]中的较小者被拷贝到C中的下一个位置，相关的计数器向前推进一步。当两个输入表有一个用完的时候，则将另一个表中的剩余部分拷贝到C中。<br>合并两个已排序的表的时间显然是线性的，因为最多进行了N-1次比较，其中N是元素的总数。</p>
<p>该算法是递归地将前半部分数据和后半部分数据鸽子归并排序，得到排序后的两个部分数据，然后使用上面描述的合并算法再将这两部分合并到一起。这是经典的分治(divide-and-conquer)策略，它将问题分成一些小的问题然后递归求解，而治的阶段则将分的阶段解得的各个答案修补到一起。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">MSort</span><span class="params">(ElementType A[],ElementType TmpArray[],<span class="keyword">int</span> Left,<span class="keyword">int</span> Right)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> Center;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span>(Left &lt; Right)</div><div class="line">    &#123;</div><div class="line">        Center = (Left + Right) / <span class="number">2</span>;</div><div class="line">        MSort(A, TmpArray, Left, Center);</div><div class="line">        MSort(A, TmpArray, Center + <span class="number">1</span>, Right);</div><div class="line">        Merge(A, TmpArray, Left, Center + <span class="number">1</span>, Right);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Mergesort</span><span class="params">(ElementType A[],<span class="keyword">int</span> N)</span></span></div><div class="line">&#123;</div><div class="line">    ElementType *TmpArray;</div><div class="line">    </div><div class="line">    TmpArray = <span class="built_in">malloc</span>(N * <span class="keyword">sizeof</span>(ElementType));</div><div class="line">    <span class="keyword">if</span>(TmpArray != <span class="literal">NULL</span>)</div><div class="line">    &#123;</div><div class="line">        MSort(A, TmpArray, <span class="number">0</span>, N - <span class="number">1</span>);</div><div class="line">        <span class="built_in">free</span>(TmpArray);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">        FatalError(<span class="string">"No space for tmp array!!!"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Merge函数的精妙在于任何时刻只用一个临时数组活动，而且使用该临时数组的任意部分。</p>
<h3 id="u7B97_u6CD5_u5206_u6790-1"><a href="#u7B97_u6CD5_u5206_u6790-1" class="headerlink" title="算法分析"></a>算法分析</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Lpos = start of left halt,Rpos = start of right half</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Merge</span><span class="params">(ElementType A[],ElementType TmpArray[],<span class="keyword">int</span> Lpos,<span class="keyword">int</span> Rpos,<span class="keyword">int</span> RightEnd)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> i,LeftEnd,NumElements,TmpPos;</div><div class="line">    </div><div class="line">    LeftEnd = Rpos - <span class="number">1</span>;</div><div class="line">    TmpPos = Lpos;</div><div class="line">    NumElements = RightEnd - Lpos +<span class="number">1</span>;</div><div class="line">    </div><div class="line">    <span class="comment">// main loop</span></div><div class="line">    <span class="keyword">while</span> (Lpos &lt;= LeftEnd &amp;&amp; Rpos &lt;= RightEnd)</div><div class="line">        <span class="keyword">if</span>(A[Lpos] &lt;= A[Rpos])</div><div class="line">            TmpArray[TmpPos++] = A[Lpos++];</div><div class="line">        <span class="keyword">else</span></div><div class="line">            TmpArray[TmpPos++] = A[Rpos++];</div><div class="line">    <span class="keyword">while</span> (Lpos &lt;= LeftEnd)</div><div class="line">        TmpArray[TmpPos++] = A[Lpos++];     <span class="comment">// Copy rest of first half</span></div><div class="line">    <span class="keyword">while</span> (Rpos &lt;= RightEnd)</div><div class="line">        TmpArray[TmpPos++] = A[Rpos++];     <span class="comment">// Copy rest of second half</span></div><div class="line">    </div><div class="line">    <span class="comment">// Copy TmpArray back</span></div><div class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; NumElements; i++,RightEnd--)</div><div class="line">        A[RightEnd] = TmpArray[RightEnd];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="u603B_u7ED3-2"><a href="#u603B_u7ED3-2" class="headerlink" title="总结"></a>总结</h3><p>虽然归并排序的运行时间是<img src="http://chart.googleapis.com/chart?cht=tx&amp;chl=O({N}\log{N}\" alt="">)，但它很难用于主存排序，主要问题在于合并两个排序的表需要线性附加内存，在整个算法中还要花费将数据拷贝到临时数组再拷贝回来这样一些附加的工作，其结果严重放慢了排序的速度。这种拷贝可以通过在递归交替层次时审慎地转换A和TmpArray的角色得到避免。</p>
<h2 id="5">快速排序</h2>

<h3 id="u4ECB_u7ECD-3"><a href="#u4ECB_u7ECD-3" class="headerlink" title="介绍"></a>介绍</h3><p>快速排序(quicksort)是实践中最快的已知排序算法，它的平均运行时间是<br><img src="http://chart.googleapis.com/chart?cht=tx&amp;chl=O({N}\log{N}\" alt="">)。它的最坏情形的性能为<img src="http://chart.googleapis.com/chart?cht=tx&amp;chl=O(N^{2}\" alt="">)。快速排序也是一种分治的递归算法。讲数组S排序的基本算法由下列简单的四步组成:</p>
<ul>
<li>1: 如果S中元素个数是0或1，则返回。</li>
<li>2: 取S中任一元素v，称之为<code>枢纽元(pivot)</code>。</li>
<li>3: 将S - {v}(S中其余元素)分成两个不相交的集合:<img src="http://latex.codecogs.com/gif.latex?S_%7B_%7B1%7D%7D%3D%5C%7Bx%5Cepsilon%20S-%7Bv%7D%7Cx%5Cleqslant%20v%5C%7D" alt="">和<img src="http://latex.codecogs.com/gif.latex?S_%7B_%7B2%7D%7D%3D%5C%7Bx%5Cepsilon%20S-%7Bv%7D%7Cx%5Cgeqslant%20v%5C%7D" alt="">。</li>
<li>4: 返回{quicksort(<img src="http://latex.codecogs.com/gif.latex?S_%7B_%7B1%7D%7D" alt="">)后，继随v,继而quicksort(<img src="http://latex.codecogs.com/gif.latex?S_%7B_%7B2%7D%7D" alt="">)}。</li>
</ul>
<h3 id="u7B97_u6CD5_u5206_u6790-2"><a href="#u7B97_u6CD5_u5206_u6790-2" class="headerlink" title="算法分析"></a>算法分析</h3><h4 id="u9009_u53D6_u67A2_u7EBD_u5143"><a href="#u9009_u53D6_u67A2_u7EBD_u5143" class="headerlink" title="选取枢纽元"></a>选取枢纽元</h4><p>枢纽元的选取对算法性能的影响很大，一种错误的方法是选择第一个元素用作枢纽元，另一种想法是选取前两个互异的关键字中较大者作为枢纽元。一种安全的做法是随机选取枢纽元，然而随机数的生成一般是昂贵的，根本减少不了算法其余部分的平均运行时间。比较常用的是三数中值分割法(Median-of-Three Partitioning)。枢纽元的最好的选择是数组的中值。然而这很难算出。一般的做法是使用左端、右端和中心位置的三个元素的中值作为枢纽元。</p>
<h4 id="u5C0F_u6570_u7EC4"><a href="#u5C0F_u6570_u7EC4" class="headerlink" title="小数组"></a>小数组</h4><p>对于很小的数组(N&lt;=20),快速排序不如插入排序好。通常的解决方法是对于小的数组不递归的使用快速排序，而代之以诸如插入排序这样的对小数组有效的排序算法。一种好的截止范围(cutoff range)是N=10。</p>
<h4 id="u7B97_u6CD5_u6838_u5FC3"><a href="#u7B97_u6CD5_u6838_u5FC3" class="headerlink" title="算法核心"></a>算法核心</h4><p>快速排序真正的核心包括<strong>分割</strong>和<strong>递归调用</strong>。选取枢纽元最容易的方法是对<code>A[Left]</code>、<code>A[Right]</code>、<code>A[Center]</code>适当地排序。将三元素中的最小者放在<code>A[Left]</code>，这正是分割阶段应该将它放到的位置。三元素中的最大者被分在<code>A[Right]</code>，因为它大于枢纽元。因此，我们可以把枢纽元放到<code>A[Right-1]</code>并在分割阶段将<code>i</code>和<code>j</code>初始化到<code>Left+1</code>和<code>Right-2</code>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="function">ElementType <span class="title">Median3</span><span class="params">(ElementType A[], <span class="keyword">int</span> Left, <span class="keyword">int</span> Right)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> Center = (Left + Right) / <span class="number">2</span>;</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(A[Left] &gt; A[Center])</div><div class="line">        Swap(&amp;A[Left],&amp;A[Center]);</div><div class="line">    <span class="keyword">if</span>(A[Left] &gt; A[Right])</div><div class="line">        Swap(&amp;A[Left],&amp;A[Right]);</div><div class="line">    <span class="keyword">if</span>(A[Center] &gt; A[Right])</div><div class="line">        Swap(&amp;A[Center],&amp;A[Right]);</div><div class="line"></div><div class="line">    <span class="comment">// Invariant:A[Left] &lt;= A[Center] &lt;= A[Right]</span></div><div class="line"></div><div class="line">    Swap(&amp;A[Center],&amp;A[Right - <span class="number">1</span>]);     <span class="comment">// Hide pivot</span></div><div class="line">    <span class="keyword">return</span> A[Right - <span class="number">1</span>];                <span class="comment">// Return pivot</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">Qsort</span><span class="params">(ElementType A[], <span class="keyword">int</span> Left, <span class="keyword">int</span> Right)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">int</span> i, j;</div><div class="line">    ElementType Pivot;</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(Left + Cutoff &lt;= Right)</div><div class="line">    &#123;</div><div class="line">        Pivot = Median3(A, Left, Right);</div><div class="line">        i = Left; j = Right - <span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span>( ; ; )</div><div class="line">        &#123;</div><div class="line">            <span class="keyword">while</span>(A[++i] &lt; Pivot)&#123;&#125;</div><div class="line">            <span class="keyword">while</span>(A[--j] &gt; Pivot)&#123;&#125;</div><div class="line">            <span class="keyword">if</span>(i &lt; j)</div><div class="line">                Swap(&amp;A[i], &amp;A[j]);</div><div class="line">            <span class="keyword">else</span> </div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">        Swap(&amp;A[i],&amp;A[Right - <span class="number">1</span>]);  <span class="comment">// Restore pivot</span></div><div class="line"></div><div class="line">        Qsort(A, Left, i - <span class="number">1</span>);</div><div class="line">        Qsort(A, i + <span class="number">1</span>, Right);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span>    <span class="comment">// Do an insertion sort on the subarray</span></div><div class="line">        InsertionSort(A + Left, Right - Left + <span class="number">1</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>for循环里的两个while循环，实现了从左到右和从右到左寻找第一个不满足条件的元素进行交换。</p>
<h3 id="u603B_u7ED3-3"><a href="#u603B_u7ED3-3" class="headerlink" title="总结"></a>总结</h3><p>在理解堆排序和归并排序后，快速排序的理解就容易对了。和归并排序一样，难点都在于递归的调用。快速排序的细节也需要注意，稍微一个改变都有可能使该算法不能正确运行。</p>
<p>(To be continued)</p>

	
	
	
	
</div>
				
				

                <!-- Post Comments -->
                


    <!-- 使用 DISQUS -->
	<div id="disqus-comment">
		<div id="disqus_thread"></div>
<script>
	var disqus_config = function () {
		this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
		this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
	};

	(function() { // DON'T EDIT BELOW THIS LINE
		var d = document, s = d.createElement('script');
		s.src = '//xinqiu.disqus.com/embed.js';
		s.setAttribute('data-timestamp', +new Date());
		(d.head || d.body).appendChild(s);
	})();
</script>
	</div>
	<style>
		#disqus-comment{
			background-color:#eee;
			padding:2pc;
		}
	</style>

            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    
    <!-- Prev Nav -->
    
        <a href="/2015/05/27/Dairy-2/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            Newer
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2015/05/09/Diary-1/" id="post_nav-older" class="next-content">
            Older
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>
        </div>
    </div>

				
				
					<!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay "></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored  sidebar-fixed-left" role="navigation">
	<div id="sidebar-main">
	    <!-- Sidebar Header -->
		<div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
    <i class="material-icons">clear_all</i>
    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="Xin Qiu's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        xinqiu.94@gmial.com
        <b class="caret"></b>
    </a>
</div>

		<!-- Sidebar Navigation  -->
		<ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
			
                <li>
                    <a href="mailto:xinqiu.94@mail.com" target="_blank" title="Email Me">
						<i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    <li id="sidebar-first-li">
        <a href="/" target="_self">
            <i class="material-icons sidebar-material-icons">home</i>
             Home
        </a>
    </li>

    <!-- I'm Feeling Lucky -->
<!--
    <li class="dropdown">
        <a href="" target="_self">
            <i class="material-icons sidebar-material-icons">explore</i>
             sidebar.imlucky
        </a>
    </li>
-->

	
    <!-- Archives  -->
    <li class="dropdown">
        <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
            <i class="material-icons sidebar-material-icons">inbox</i>
             Archives
            <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
            <li>
            <a class="sidebar_archives-link" href="/archives/2016/10/">October 2016<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/08/">August 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/07/">July 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/06/">June 2016<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/05/">May 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/04/">April 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/03/">March 2016<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/02/">February 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/01/">January 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/12/">December 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/11/">November 2015<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/10/">October 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/09/">September 2015<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/08/">August 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/07/">July 2015<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/06/">June 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/05/">May 2015<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/03/">March 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/02/">February 2015<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/01/">January 2015<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2014/12/">December 2014<span class="sidebar_archives-count">1</span></a>
        </ul>
    </li>

    <!-- Divider -->
    <li class="divider"></li>


    <!-- Pages  -->
	
		<li>
			<a href="/projects" title="Projects">
				Projects
			</a>
		</li>
	
		<li>
			<a href="/reading-list" title="Reading">
				Reading
			</a>
		</li>
	
		<li>
			<a href="/timeline" title="Timeline">
				Timeline
			</a>
		</li>
	

    <!-- Article Numebr  -->
    <li>
        <a href="#">
             Article Number
             <span class="sidebar-badge">38</span>
        </a>
    </li>
</ul>

		<!-- Sidebar Divider -->
		<div class="sidebar-divider"></div>

		<!-- Sidebar Footer -->
		<!-- 
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持。 :) 
-->

<!-- Theme Material -->
<a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
	<div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
		Theme - Material
		<span class="sidebar-badge badge-circle">i</span>
	</div>
</a>

<!-- Help & Support -->
<!--
<a href="mailto:hiviosey@gmail.com" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
		sidebar.help
		<span class="mdl-button__ripple-container">
			<span class="mdl-ripple"></span>
		</span>
	</div>
</a>
-->

<!-- Feedback -->
<!--
<a href="https://github.com/viosey/hexo-theme-material/issues" target="_blank" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
         sidebar.feedback
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
</a>
-->

<!-- Abount Theme -->
<!--
<a href="https://blog.viosey.com/index.php/Material.html" target="_blank" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
         sidebar.about_theme
        <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
</a>-->

	</div>
    
    <!-- Sidebar Sponsor -->
    


</aside>

				
				
				
					<!-- Footer Top Button -->
					<div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>
				
				
				<!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
	
	
		<!-- Paradox Footer Left Section -->
		<div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
    <a href="https://twitter.com/twitter" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-twitter.png);">
        <span class="visuallyhidden">Twitter</span>
    </button></a>
    
    
    <!-- Facebook -->
    
    <a href="https://www.facebook.com/facebook" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-facebook.png);">
        <span class="visuallyhidden">Facebook</span>
    </button></a>
    
    
    <!-- Google + -->
    
    <a href="https://www.google.com/" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-gplus.png);">
        <span class="visuallyhidden">Google Plus</span>
    </button></a>
    
    
    <!-- Weibo -->
    
    
    
    <!-- Instagram -->
    
    
    
    <!-- Tumblr -->
    
    
    
    <!-- Github -->
    
    <a href="https://github.com/xinqiu" target="view_window"><button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-github.png);">
        <span class="visuallyhidden">Github</span>
    </button></a>
    
</div>


		<!--Copyright-->
		<div id="copyright">Copyright&nbsp;©&nbsp;<script type="text/javascript">var fd = new Date();document.write(fd.getFullYear());</script>&nbsp;一人Code</div>

		<!-- Paradox Footer Right Section -->

		<!-- 
		I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright.
		It will not impact the appearance and can give developers a lot of support :)

		很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
		它不会影响美观并可以给开发者很大的支持。 :) 
		-->

		<div class="mdl-mini-footer--right-section">
			<div>
				<div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
				<div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
			</div>
		</div>
	
    
</footer>
                
				<!-- Import File -->
<script src="/js/js.min.js"></script>
<script src="/js/nprogress.js"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    
    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });
    
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>




    <!-- Leancloud -->
	<script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
	<script>
		AV.initialize("wNFmCWTd6GAdUBwK4C35gD2G-gzGzoHsz", "fkjBgbCuEaEEKpksFNIkGYsk");
	</script>
    <script>
	function showTime(Counter) {
		var query = new AV.Query(Counter);
		$(".leancloud-views_num").each(function() {
			var url = $(this).attr("id").trim();
			query.equalTo("url", url);
			query.find({
				success: function(results) {
					if (results.length == 0) {
						var content = '0 ' + $(document.getElementById(url)).text();
						$(document.getElementById(url)).text(content);
						return;
					}
					for (var i = 0; i < results.length; i++) {
						var object = results[i];
						var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
						$(document.getElementById(url)).text(content);
					}
				},
				error: function(object, error) {
					console.log("Error: " + error.code + " " + error.message);
				}
			});

		});
	}

	function addCount(Counter) {
		var Counter = AV.Object.extend("Counter");
		url = $(".leancloud-views_num").attr('id').trim();
		title = $(".leancloud-views_num").attr('data-flag-title').trim();
		var query = new AV.Query(Counter);
		query.equalTo("url", url);
		query.find({
			success: function(results) {
				if (results.length > 0) {
					var counter = results[0];
					counter.fetchWhenSave(true);
					counter.increment("time");
					counter.save(null, {
						success: function(counter) {
							var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
							$(document.getElementById(url)).text(content);
						},
						error: function(counter, error) {
							console.log('Failed to save Visitor num, with error message: ' + error.message);
						}
					});
				} else {
					var newcounter = new Counter();
					newcounter.set("title", title);
					newcounter.set("url", url);
					newcounter.set("time", 1);
					newcounter.save(null, {
						success: function(newcounter) {
							console.log("newcounter.get('time')="+newcounter.get('time'));
							var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
							$(document.getElementById(url)).text(content);
						},
						error: function(newcounter, error) {
							console.log('Failed to create');
						}
					});
				}
			},
			error: function(error) {
				console.log('Error:' + error.code + " " + error.message);
			}
		});
	}
	$(function() {
		var Counter = AV.Object.extend("Counter");
		if ($('.leancloud-views_num').length == 1) {
			addCount(Counter);
		} else if ($('.post-title-link').length > 1) {
			showTime(Counter);
		}
	}); 
</script>







    <!-- 使用 DISQUS js 代码 -->
	<script id="dsq-count-scr" src="//xinqiu.disqus.com/count.js" async></script>


<!-- Swiftye -->


<!-- Local Search-->

	<script>
	var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        success: function( xmlResponse ) {
            // get the contents from search data
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length <= 0) {
                    return;
                }
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        str += "<li><a href='"+ data_url +"' class='search-result-title' target='_blank'>"+ data_title;
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out characters
                            var start = first_occur - 6;
                            var end = first_occur + 6;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 10;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substr(start, end); 
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<em class=\"search-keyword\">"+keyword+"</em>");
                            })
                            str += "<p class=\"search-result\">" + match_content +"...</p>" +"</a>";
                        }
                    }
                })
                $resultContent.innerHTML = str;
            })
        }
    })
}
</script>

	<script>
		var search_path = "search.xml";
		if (search_path.length == 0) {
		search_path = "search.xml";
		}
		var path = "/" + search_path;
		searchFunc(path, 'search', 'local-search-result');
        
        
	</script>


<!-- Window Load-->
<script>
    // Post_Toc parent position fixed
    $(window).load(function() {
        $(".post-toc-wrap").parent(".mdl-menu__container").css("position", "fixed");
    });
</script>
            </main>
        </div>
		
    </body>
		
	
</html>
