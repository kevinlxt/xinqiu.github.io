
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="一人Code">
    <title>&lt;&lt;深入理解C指针&gt;&gt;读书笔记 - 一人Code</title>
    <meta name="author" content="Xin Qiu">
    
    
    
    <meta name="description" content="Understanding and Using C Pointers">
<meta property="og:type" content="blog">
<meta property="og:title" content="<<深入理解C指针>>读书笔记">
<meta property="og:url" content="http://xinqiu.me/2015/06/09/C-Pointers/index.html">
<meta property="og:site_name" content="一人Code">
<meta property="og:description" content="Understanding and Using C Pointers">
<meta property="og:updated_time" content="2016-02-11T04:32:57.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="<<深入理解C指针>>读书笔记">
<meta name="twitter:description" content="Understanding and Using C Pointers">
    
    
        
    
    
        <meta property="og:image" content="http://xinqiu.me/assets/images/avatar.png"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-ejlztp1tasruqfvoz6xmgqng0anzae8ox7cqjj5yibieqgcmhe9fwxfae6zj.min.css" type="text/css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-57881840-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="3">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">一人Code</a>
    </h1>
    
        
            <a  class="header-right-picture "
                href="/#about">
        
        
            <img class="header-picture" src="/assets/images/avatar.png"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="3">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.png"/>
            </a>
            <span class="sidebar-profile-name">Xin Qiu</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Home</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">Archives</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">Categories</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/projects"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-code"></i>
                    <span class="sidebar-button-desc">Projects</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/reading-list"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-book"></i>
                    <span class="sidebar-button-desc">Reading List</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/timeline"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-calendar"></i>
                    <span class="sidebar-button-desc">Timeline</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-user"></i>
                    <span class="sidebar-button-desc">About</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link st-search-show-outputs"
                         href="/#search"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">Search</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/xinqiu" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="mailto:xinqiu.94@gmail.com" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">Mail</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="3"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            &lt;&lt;深入理解C指针&gt;&gt;读书笔记
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" content="Tue Jun 09 2015 00:00:00 GMT+0800">
	
		    Jun 09, 2015
    	
    </time>
    
</div>
</div>
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <blockquote>
<p>指针可以说是C的灵魂，C语言入门很容易，但想精通，就必须要对指针有很透彻的理解。大一上学期学了一遍C语言，然而指针这个最重要的地方，却没有好好的深入研究。这本&lt;&lt;深入理解C指针&gt;&gt;虽然谈不上讲到多少指针的奇巧淫技，但作为复习指针的相关知识，还是可以稍微读读。</p>
</blockquote>
<a id="more"></a>
<h2 id="u9605_u8BFB_u58F0_u660E"><a href="#u9605_u8BFB_u58F0_u660E" class="headerlink" title="阅读声明"></a>阅读声明</h2><p>倒过来读会让指针更容易理解。<br>￼￼￼<br>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const int *pci;</span><br></pre></td></tr></table></figure>
<hr>
<table>
<thead>
<tr>
<th>Explanation</th>
<th style="text-align:center">Declaration</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.pci is a variable</td>
<td style="text-align:center">const int *<strong>pci</strong></td>
</tr>
<tr>
<td>2.pci is a pointer variable</td>
<td style="text-align:center">const int <strong> *pci</strong></td>
</tr>
<tr>
<td>3.pci is a pointer variable to an integer</td>
<td style="text-align:center">const <strong> int *pci</strong></td>
</tr>
<tr>
<td>4.pci is a pointer variable to a constant integer</td>
<td style="text-align:center"><strong>const int *pci </strong></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="u5E38_u91CF_u4E0E_u6307_u9488"><a href="#u5E38_u91CF_u4E0E_u6307_u9488" class="headerlink" title="常量与指针"></a>常量与指针</h2><p>和&lt;<c专家编程>&gt;一样，&lt;&lt;深入理解C指针&gt;&gt;也讲到了常量与指针。</c专家编程></p>
<h3 id="u6307_u5411_u5E38_u91CF_u7684_u6307_u9488"><a href="#u6307_u5411_u5E38_u91CF_u7684_u6307_u9488" class="headerlink" title="指向常量的指针"></a>指向常量的指针</h3><p>指针定义为指向常量，不能通过指针修改它所引用的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const int *ptr;&#10;int const *ptr;</span><br></pre></td></tr></table></figure>
<h3 id="u6307_u5411_u975E_u5E38_u91CF_u7684_u5E38_u91CF_u6307_u9488"><a href="#u6307_u5411_u975E_u5E38_u91CF_u7684_u5E38_u91CF_u6307_u9488" class="headerlink" title="指向非常量的常量指针"></a>指向非常量的常量指针</h3><p>指针不可变，但所指向的数据可变。指针必须被初始化为指向非常量变量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int *const ptr;</span><br></pre></td></tr></table></figure>
<h3 id="u6307_u5411_u5E38_u91CF_u7684_u5E38_u91CF_u6307_u9488"><a href="#u6307_u5411_u5E38_u91CF_u7684_u5E38_u91CF_u6307_u9488" class="headerlink" title="指向常量的常量指针"></a>指向常量的常量指针</h3><p>指针本身不能修改，指向的数据也不能通过它来修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const int *const ptr;</span><br></pre></td></tr></table></figure>
<h3 id="u6307_u5411_u300E_u6307_u5411_u5E38_u91CF_u7684_u5E38_u91CF_u6307_u9488_u300F_u7684_u6307_u9488"><a href="#u6307_u5411_u300E_u6307_u5411_u5E38_u91CF_u7684_u5E38_u91CF_u6307_u9488_u300F_u7684_u6307_u9488" class="headerlink" title="指向『指向常量的常量指针』的指针"></a>指向『指向常量的常量指针』的指针</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const int * const * ptr;</span><br></pre></td></tr></table></figure>
<h2 id="u52A8_u6001_u5185_u5B58_u5206_u914D"><a href="#u52A8_u6001_u5185_u5B58_u5206_u914D" class="headerlink" title="动态内存分配"></a>动态内存分配</h2><ul>
<li>malloc</li>
<li>realloc</li>
<li>calloc</li>
</ul>
<hr>
<table>
<thead>
<tr>
<th>Function</th>
<th style="text-align:center">Declaration</th>
</tr>
</thead>
<tbody>
<tr>
<td>malloc</td>
<td style="text-align:center">从堆上分配内存</td>
</tr>
<tr>
<td>realloc</td>
<td style="text-align:center">在之前分配的内存块基础上，将内存重新分配为更大或者更小的部分</td>
</tr>
<tr>
<td>calloc</td>
<td style="text-align:center">从堆上分配内存并清零</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="u53D8_u957F_u6570_u7EC4"><a href="#u53D8_u957F_u6570_u7EC4" class="headerlink" title="变长数组"></a>变长数组</h3><p>使用alloca函数(微软为malloca)在函数的栈帧上分配内存。函数返回后自动释放内存。</p>
<h4 id="u6808_u5E27"><a href="#u6808_u5E27" class="headerlink" title="栈帧"></a>栈帧</h4><p>栈帧由以下几种元素组成</p>
<ul>
<li>返回地址</li>
<li>局部数据存储</li>
<li>参数存储</li>
<li>栈指针和基指针</li>
</ul>
<h2 id="u52A8_u6001_u5206_u914D_u4E8C_u7EF4_u6570_u7EC4"><a href="#u52A8_u6001_u5206_u914D_u4E8C_u7EF4_u6570_u7EC4" class="headerlink" title="动态分配二维数组"></a>动态分配二维数组</h2><h3 id="u52A8_u6001_u5206_u914D_u53EF_u80FD_u4E0D_u8FDE_u7EED_u7684_u5185_u5B58"><a href="#u52A8_u6001_u5206_u914D_u53EF_u80FD_u4E0D_u8FDE_u7EED_u7684_u5185_u5B58" class="headerlink" title="动态分配可能不连续的内存"></a>动态分配可能不连续的内存</h3><p>以下代码演示了如何创建一个内存可能不连续的二维数组。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">int rows = 2;</span><br><span class="line">int columns = 5;</span><br><span class="line"></span><br><span class="line">int **matrix = (int **) malloc(rows * sizeof(int *));</span><br><span class="line"></span><br><span class="line">for(int i = 0; i &lt; rows; i++)&#123;</span><br><span class="line">	matrix[i] = (int *) malloc(columns * sizeof(int))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="u52A8_u6001_u5206_u914D_u8FDE_u7EED_u5185_u5B58"><a href="#u52A8_u6001_u5206_u914D_u8FDE_u7EED_u5185_u5B58" class="headerlink" title="动态分配连续内存"></a>动态分配连续内存</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">int rows = 2;</span><br><span class="line">int columns = 5;</span><br><span class="line"></span><br><span class="line">int **matrix = (int **) malloc(rows * sizeof(int *));</span><br><span class="line">matrix[0] = (int *) malloc(rows * columns * sizeof(int));</span><br><span class="line">for(int i = 0; i &lt; rows; i++)&#123;</span><br><span class="line">	matrix[i] = matrix[0] + i * columns;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码演示了第一种技术，第一个malloc分配了一个整数指针数组，一个元素用来存储一行的指针。第二个malloc在存储每行第一个元素的地址。</p>
<p>第二种技术是一次性分配数组所需的所有内存。<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int *matrix = (int *) malloc(rows * columns * sizeof(int));</span><br></pre></td></tr></table></figure></p>
<h2 id="u7ED3_u6784_u4F53_u5185_u5B58_u5927_u5C0F"><a href="#u7ED3_u6784_u4F53_u5185_u5B58_u5927_u5C0F" class="headerlink" title="结构体内存大小"></a>结构体内存大小</h2><p>为结构体分配内存时，分配的内存至少是各个字段的长度和。实际长度通常大于这个和。某些数据类型需要对齐到特定边界。比如说，短整数通常对齐到能被2整除的地址上，而整数对齐到能被4整除的地址上。</p>
<h2 id="u907F_u514Dmalloc/free_u5F00_u9500"><a href="#u907F_u514Dmalloc/free_u5F00_u9500" class="headerlink" title="避免malloc/free开销"></a>避免malloc/free开销</h2><p>重复分配然后释放结构体会尝试一些开销，可能导致巨大的性能瓶颈。解决这问题的一种办法是为分配的结构体单独维护一个表。当用户不再需要某个结构体实例时，将其返回结构体池中。当需要某个实例，则从结构体池中获取一个对象。如果没有可用的元素，就动态分配一个实例。但表的长度则成为了一个问题。但这个问题是可以解决。</p>
<h2 id="u5904_u7406_u672A_u521D_u59CB_u5316_u6307_u9488"><a href="#u5904_u7406_u672A_u521D_u59CB_u5316_u6307_u9488" class="headerlink" title="处理未初始化指针"></a>处理未初始化指针</h2><p>有三种方法可以用来处理未初始化的指针:</p>
<ul>
<li>总是用NULL来初始化指针</li>
<li>用assert函数</li>
<li>用第三方工具</li>
</ul>
<p>assert函数判断表达式是否为真，表达式为假，程序会终止。</p>
<h2 id="u51FD_u6570_u6307_u9488"><a href="#u51FD_u6570_u6307_u9488" class="headerlink" title="函数指针"></a>函数指针</h2><h3 id="u58F0_u660E_u51FD_u6570_u6307_u9488"><a href="#u58F0_u660E_u51FD_u6570_u6307_u9488" class="headerlink" title="声明函数指针"></a>声明函数指针</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> (*foo)();</span><br></pre></td></tr></table></figure>
<p>foo为函数指针。要注意的是，如果声明是</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> *<span class="title">foo</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
<p>意义就变了，代表foo函数返回一个int型指针。</p>
<p>为函数指针声明一个类型定义会比较方便，但类型定义看起来有点奇怪，通常，类型定义的名字是声明的最后一个元素。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span> <span class="params">(*funcptr)</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<p>举个栗子</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span> <span class="params">(*funcptr)</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line">funcptr fptr2;</span><br><span class="line">fptr2 = foo; <span class="comment">// 	foo为函数名</span></span><br><span class="line">fptr(n);	<span class="comment">// 调用foo函数</span></span><br></pre></td></tr></table></figure>
<h3 id="u4F20_u9012_u51FD_u6570_u6307_u9488"><a href="#u4F20_u9012_u51FD_u6570_u6307_u9488" class="headerlink" title="传递函数指针"></a>传递函数指针</h3><p>只要把函数指针声明最为函数参数即可。</p>
<p>举个栗子</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> num1, <span class="keyword">int</span> num2)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">substract</span><span class="params">(<span class="keyword">int</span> num1, <span class="keyword">int</span> num2)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> num1 - num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span> <span class="params">(*fptrOperation)</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compute</span><span class="params">(fptrOperation operation, <span class="keyword">int</span> num1, <span class="keyword">int</span> num2)</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> operation(num1, num2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="u8FD4_u56DE_u51FD_u6570_u6307_u9488"><a href="#u8FD4_u56DE_u51FD_u6570_u6307_u9488" class="headerlink" title="返回函数指针"></a>返回函数指针</h3><p>返回函数指针需要把函数的返回类型声明为函数指针。</p>
<p>接着上一个的例子</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">fptrOperation <span class="title">select</span><span class="params">(<span class="keyword">char</span> opcode)</span></span>&#123;</span><br><span class="line">    <span class="keyword">switch</span>(opcode)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'+'</span>: <span class="keyword">return</span> add;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'-'</span>: <span class="keyword">return</span> substract;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// evaluate函数整合了其他函数。该函数接受两个整数和一个字符，</span></span><br><span class="line"><span class="comment">// 字符代表要做的操作，它会把opcode传递给select函数，</span></span><br><span class="line"><span class="comment">// 后者返回要执行的函数指针。</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">evaluate</span><span class="params">(<span class="keyword">char</span> opcode, <span class="keyword">int</span> num1, <span class="keyword">int</span> num2)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    fptrOperation operation = select(opcode);</span><br><span class="line">    <span class="keyword">return</span> operation(num1, num2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="u51FD_u6570_u6307_u9488_u6570_u7EC4"><a href="#u51FD_u6570_u6307_u9488_u6570_u7EC4" class="headerlink" title="函数指针数组"></a>函数指针数组</h3><p>把函数指针声明为数组的类型。<br>接着上面的例子</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span> <span class="params">(*opertation)</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span></span>;</span><br><span class="line">operation operations[<span class="number">128</span>] = &#123;<span class="literal">NULL</span>&#125;;</span><br><span class="line"><span class="comment">// 或者 int(*operations[128])(int, int) = &#123;NULL&#125;;</span></span><br><span class="line"><span class="comment">// 用指针数组来避免使用switch</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">initializeOperationsArray</span><span class="params">()</span></span>&#123;</span><br><span class="line">	operations[<span class="string">'+'</span>] = add;</span><br><span class="line">	operations[<span class="string">'-'</span>] = subtract;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 所以evaluate需要改写为evaluateArray.</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">evaluateArray</span><span class="params">(<span class="keyword">char</span> opcode, <span class="keyword">int</span> num1, <span class="keyword">int</span> num2)</span></span>&#123;</span><br><span class="line">	fptrOperation operation;</span><br><span class="line">	operation = operations[opcode];</span><br><span class="line">	<span class="keyword">return</span> operation(num1, num2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="u6307_u9488_u5B89_u5168_u65B9_u9762"><a href="#u6307_u9488_u5B89_u5168_u65B9_u9762" class="headerlink" title="指针安全方面"></a>指针安全方面</h2><h3 id="u6E05_u9664_u654F_u611F_u6570_u636E"><a href="#u6E05_u9664_u654F_u611F_u6570_u636E" class="headerlink" title="清除敏感数据"></a>清除敏感数据</h3><p>复写敏感数据可以使用<code>memset</code>函数。</p>
<h2 id="u5176_u4ED6_u91CD_u8981_u5185_u5BB9"><a href="#u5176_u4ED6_u91CD_u8981_u5185_u5BB9" class="headerlink" title="其他重要内容"></a>其他重要内容</h2><ul>
<li>指针的类型转换</li>
<li>访问硬件设备</li>
<li>别名和强别名</li>
<li>使用restrict关键字</li>
<li>线程</li>
<li>面向对象技术</li>
</ul>
<p>书中最后的部分简单的提及了一些高级技巧，这块知识，我觉得还是看其他详细的书比较好。</p>

            
                

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Notes/">Notes</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/07/07/LeetCode-100/"  data-tooltip="LeetCode - Same Tree">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/05/30/Dijkstra's-Algorithom/" data-tooltip="Dijkstra算法">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://xinqiu.me/2015/06/09/C-Pointers/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://xinqiu.me/2015/06/09/C-Pointers/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://xinqiu.me/2015/06/09/C-Pointers/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2016 Xin Qiu. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="3">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/07/07/LeetCode-100/"  data-tooltip="LeetCode - Same Tree">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2015/05/30/Dijkstra's-Algorithom/" data-tooltip="Dijkstra算法">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://xinqiu.me/2015/06/09/C-Pointers/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://xinqiu.me/2015/06/09/C-Pointers/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://xinqiu.me/2015/06/09/C-Pointers/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="3">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://xinqiu.me/2015/06/09/C-Pointers/">
                <i class="fa fa-google-plus"></i><span class="">Share on Google Plus</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://xinqiu.me/2015/06/09/C-Pointers/">
                <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://xinqiu.me/2015/06/09/C-Pointers/">
                <i class="fa fa-twitter"></i><span>Share on Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.png"/>
        
            <h4 id="about-card-name">Xin Qiu</h4>
        
            <h5 id="about-card-bio"><p>Life is short.</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Student</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                China Jiangsu
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/scrip-gfmrkxcl0qohe3cfdgxhzvc0yrceqta8i4iix0txvn8q4o2adlqd5n0jmkvt.min.js" type="text/javascript"></script>
<!--SCRIPTS END-->

    
        <script>
             var disqus_config = function () {
                 this.page.url = 'http://xinqiu.me/2015/06/09/C-Pointers/';
                 
                    this.page.identifier = '2015/06/09/C-Pointers/';
                                  
             };
            (function() {
                var d = document, s = d.createElement('script');
                var disqus_shortname = 'xinqiu';
                s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
    


    <script type="text/javascript">
        (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
                (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
            e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
        })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

        _st('install','sPbeZKuyhnXGMXxkK36m','2.0.0');
    </script>


</html>
